<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>finally方法</title>
</head>

<body>
  <script>
    /*
      finally() 方法返回一个 Promise。
      在 promise 结束时，无论结果是 fulfilled 或者是 rejected，都会执行指定的回调函数。
      这为在 Promise 是否成功完成后都需要执行的代码提供了一种方式。
      这避免了同样的语句需要在 then() 和 catch() 中各写一次的情况。
    */
    var p = new Promise((resolve, reject) => {
      reject('aaa')
    })
    p.then(res => {
      console.log('then')
      return 111
    }).catch(err => {
      console.log('catch')
      return 'error-111'
    }).finally(() => {
      console.log('finally')
    }).then(res => {
      console.log(res)
    })
  </script>
</body>

</html>